<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        var new_element_N = document.createElement("style");
        new_element_N.innerHTML = `#drager { 
    position: fixed; 
    width: 24px; 
    height: 24px; 
    /*background-color: rgba(0, 0, 0, 0.2); */
    z-index: 10000; 
    cursor: pointer; 
    top: 0px; 
    right: 7px; 
    border-radius: 30%; 
    padding: 6px; 
  } 
   
  #drager>div { 
    border-radius: 50%; 
    width: 100%; 
    height: 100%; 
    /*background-color: rgba(0, 0, 0, 0.3); */
    transition: all 0.2s; 
   -webkit-transition: all 0.2s; 
   -moz-transition: all 0.2s; 
   -o-transition: all 0.2s; 
  } 
  #drager:hover>div{ 
    background-color: rgba(0, 0, 0, 0.6); 
  } ;`
        document.body.appendChild(new_element_N);
        new_element_N = document.createElement('div');
        new_element_N.setAttribute("id", "drager");
        new_element_N.style.top = "500px";//åˆå§‹æ”¾åœ¨å±å¹•å³ä¸‹è§’
        new_element_N.style.right = "20px";
        new_element_N.innerHTML = ' <div style="text-align:center;transform:scale(2.5);">ğŸš´â€â™‚ï¸</div>';
        document.body.appendChild(new_element_N);
        // 
        // 
        var posX;
        var posY;
        var screenWidth = document.documentElement.clientWidth;
        var screenHeight = document.documentElement.clientHeight;
        function dragEventFunction(idName) {
            var fdiv = document.getElementById(idName);
            fdiv.onmousedown = function (e) {
                screenWidth = document.documentElement.clientWidth;
                screenHeight = document.documentElement.clientHeight;
                if (!e) { e = window.event; } //IE
                posX = e.clientX - parseInt(fdiv.style.left);
                posY = e.clientY - parseInt(fdiv.style.top);
                document.onmousemove = mousemove;
            }
            document.onmouseup = function ()//é‡Šæ”¾æ—¶è‡ªåŠ¨è´´åˆ°æœ€è¿‘ä½ç½®
            {
                document.onmousemove = null;
                if ((parseInt(fdiv.style.top) + parseInt(fdiv.clientHeight) / 2) <= (screenHeight / 2)) {//åœ¨ä¸ŠåŠéƒ¨åˆ†
                    if ((parseInt(fdiv.style.left) + parseInt(fdiv.clientWidth) / 2) <= (screenWidth / 2)) {//åœ¨å·¦åŠéƒ¨åˆ†
                        if ((parseInt(fdiv.style.top) + parseInt(fdiv.clientHeight) / 2) <= (parseInt(fdiv.style.left) + parseInt(fdiv.clientWidth) / 2)) {//é è¿‘ä¸Šæ–¹
                            fdiv.style.top = "0px";
                        } else {//é è¿‘å·¦è¾¹
                            fdiv.style.left = "0px";
                        }
                    } else {//åœ¨å³åŠéƒ¨åˆ†
                        if ((parseInt(fdiv.style.top) + parseInt(fdiv.clientHeight) / 2) <= (screenWidth - (parseInt(fdiv.style.left) + parseInt(fdiv.clientWidth) / 2))) {//é è¿‘ä¸Šæ–¹
                            fdiv.style.top = "0px";
                        } else {//é è¿‘å³è¾¹
                            fdiv.style.left = (screenWidth - parseInt(fdiv.clientWidth)) + "px";
                        }
                    }
                } else { //ä¸‹åŠéƒ¨åˆ†
                    if ((parseInt(fdiv.style.left) + parseInt(fdiv.clientWidth) / 2) <= (screenWidth / 2)) {//åœ¨å·¦åŠéƒ¨åˆ†
                        if ((screenHeight - (parseInt(fdiv.style.top) + parseInt(fdiv.clientHeight) / 2)) <= (parseInt(fdiv.style.left) + parseInt(fdiv.clientWidth) / 2)) {//é è¿‘ä¸‹æ–¹
                            fdiv.style.top = (screenHeight - parseInt(fdiv.clientHeight)) + "px";
                        } else {//é è¿‘å·¦è¾¹
                            fdiv.style.left = "0px";
                        }
                    } else {//åœ¨å³åŠéƒ¨åˆ†
                        if ((screenHeight - (parseInt(fdiv.style.top) + parseInt(fdiv.clientHeight) / 2)) <= (screenWidth - (parseInt(fdiv.style.left) + parseInt(fdiv.clientWidth) / 2))) {//é è¿‘ä¸Šæ–¹
                            fdiv.style.top = (screenHeight - parseInt(fdiv.clientHeight)) + "px";
                        } else {//é è¿‘å³è¾¹
                            fdiv.style.left = (screenWidth - parseInt(fdiv.clientWidth)) + "px";
                        }
                    }
                }
            }
            function mousemove(ev) {
                if (ev == null) { ev = window.event; }//IE
                if ((ev.clientY - posY) <= 0) {//è¶…è¿‡é¡¶éƒ¨
                    fdiv.style.top = "0px";
                } else if ((ev.clientY - posY) > (screenHeight - parseInt(fdiv.clientHeight))) {//è¶…è¿‡åº•éƒ¨
                    fdiv.style.top = (screenHeight - parseInt(fdiv.clientHeight)) + "px";
                } else {
                    fdiv.style.top = (ev.clientY - posY) + "px";
                }

                if ((ev.clientX - posX) <= 0) {//è¶…è¿‡å·¦è¾¹
                    fdiv.style.left = "0px";
                } else if ((ev.clientX - posX) > (screenWidth - parseInt(fdiv.clientWidth))) {//è¶…è¿‡å³è¾¹
                    fdiv.style.left = (screenWidth - parseInt(fdiv.clientWidth)) + "px";
                } else {
                    fdiv.style.left = (ev.clientX - posX) + "px";
                }
                // console.log( posX +" "+ fdiv.style.left);

            }
            window.onload = window.onresize = function () { //çª—å£å¤§å°æ”¹å˜äº‹ä»¶
                screenWidth = document.documentElement.clientWidth;
                screenHeight = document.documentElement.clientHeight;
                if ((parseInt(fdiv.style.top) + parseInt(fdiv.clientHeight)) > screenHeight) {//çª—å£æ”¹å˜é€‚åº”è¶…å‡ºçš„éƒ¨åˆ†
                    fdiv.style.top = (screenHeight - parseInt(fdiv.clientHeight)) + "px";
                }
                if ((parseInt(fdiv.style.left) + parseInt(fdiv.clientWidth)) > screenWidth) {//çª—å£æ”¹å˜é€‚åº”è¶…å‡ºçš„éƒ¨åˆ†
                    fdiv.style.left = (screenWidth - parseInt(fdiv.clientWidth)) + "px";
                }
                document.onmouseup.apply()
            };
            fdiv.addEventListener('touchstart', fdiv.onmousedown, false);
            fdiv.addEventListener('touchmove', function (event) {
                // å¦‚æœè¿™ä¸ªå…ƒç´ çš„ä½ç½®å†…åªæœ‰ä¸€ä¸ªæ‰‹æŒ‡çš„è¯
                if (event.targetTouches.length == 1) {
                    event.preventDefault();// é˜»æ­¢æµè§ˆå™¨é»˜è®¤äº‹ä»¶ï¼Œé‡è¦ 
                    var touch = event.targetTouches[0];
                    if ((touch.pageY) <= 0) {//è¶…è¿‡é¡¶éƒ¨
                        fdiv.style.top = "0px";
                    } else if (touch.pageY > (screenHeight - parseInt(fdiv.clientHeight))) {//è¶…è¿‡åº•éƒ¨
                        fdiv.style.top = (screenHeight - parseInt(fdiv.clientHeight)) + "px";
                    } else {
                        fdiv.style.top = (touch.pageY - parseInt(fdiv.clientHeight) / 2) + "px";
                    }

                    if (touch.pageX <= 0) {//è¶…è¿‡å·¦è¾¹
                        fdiv.style.left = "0px";
                    } else if (touch.pageX > (screenWidth - parseInt(fdiv.clientWidth))) {//è¶…è¿‡å³è¾¹
                        fdiv.style.left = (screenWidth - parseInt(fdiv.clientWidth)) + "px";
                    } else {
                        fdiv.style.left = (touch.pageX - parseInt(fdiv.clientWidth) / 2) + "px";
                    }
                }
            }, false);
            fdiv.addEventListener('touchend', document.onmouseup, false);
            fdiv.onclick = function () {//ç‚¹å‡»äº‹ä»¶å¯èƒ½åœ¨æ‰‹æœºç«¯æµè§ˆå™¨ä¼šä¸ç½‘é¡µç¼©æ”¾äº‹ä»¶å†²çª
                alert("è§¦å‘äº†ç‚¹å‡»äº‹ä»¶ï¼");
            }
        }
        dragEventFunction("drager")
    </script>
    
</body>

</html>